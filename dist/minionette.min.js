// Backbone.Minionette
// -------------------
// v0.2.1
//
// Copyright (c)2013 Justin Ridgewell
// Distributed under MIT license
//
// https://github.com/jridgewell/minionette

var Minionette=function(e,t,i,n){"use strict";var r={};return n.Minionette=r,i.event.special.remove={remove:function(e){e.handler&&e.handler()}},r.View=n.View.extend({constructor:function(){n.View.apply(this,arguments),t.bindAll(this,"_jqueryRemove","_remove"),this._subViews={},this._listenToEvents(this.model,this.modelEvents),this._listenToEvents(this.collection,this.collectionEvents)},template:function(){return""},delegateEvents:function(){n.View.prototype.delegateEvents.apply(this,arguments),this.$el.on("remove.delegateEvents"+this.cid,this._jqueryRemove)},remove:function(){this.trigger("remove:before"),this._removeSubViews(),n.View.prototype.remove.apply(this,arguments),this.trigger("remove")},_removeSubViews:function(){t.invoke(this._subViews,"remove")},assign:function(e,i,n){var r;t.isObject(e)?(r=e,n=i):(r={},r[e]=i),r&&t.each(r,function(e,t){this._subViews[e.cid]=e,n?this.$(t).replaceWith(e.el):e.setElement(this.$(t)).render()},this)},_jqueryRemove:function(){this.remove()},_listenToEvents:function(e,i){for(var n in i){var r=i[n];t.isFunction(r)||(r=this[r]),r&&this.listenTo(e,n,r)}return this}}),r.ModelView=r.View.extend({serializeData:function(){return this.model.attributes},render:function(){return this.trigger("render:before"),t.each(this._subViews,function(e){e.$el.detach()}),this.$el.html(this.template(this.serializeData())),this.trigger("render"),this}}),r.CollectionView=r.View.extend({ModelView:n.View,collectionEvents:{add:"addOne",remove:"removeOne",reset:"render"},render:function(){this.trigger("render:before"),this.$el.html(this.template(this.collection));var e=this._getModelView();return this.collection.each(function(t){this._addModelView(t,e)},this),this.trigger("render"),this},addOne:function(e){this.trigger("addOne:before");var t=this._getModelView();this._addModelView(e,t),this.trigger("addOne")},removeOne:function(e){this.trigger("removeOne:before");var t=this._findSubViewByModel(e);this._removeModelView(t),this.trigger("removeOne")},_addModelView:function(e,t){var i=new t({model:e});this._subViews[i.cid]=i,this.$el.append(i.render().el)},_getModelView:function(){var e=this.ModelView;return this.options&&this.options.ModelView&&(e=this.option.ModelView),e},_removeModelView:function(e){e&&(e.remove(),delete this._subViews[e.cid])},_findSubViewByModel:function(e){return t.findWhere(this._subViews,{model:e})}}),r}(this,_,jQuery,Backbone);
//@ sourceMappingURL=dist/minionette.map